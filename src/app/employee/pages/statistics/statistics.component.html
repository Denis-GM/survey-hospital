<div [formGroup]="statForm" class="control-panel">
  <div class="control-panel__name-survey">
    <tui-select
      class="b-form"
      [tuiTextfieldLabelOutside]="true"
      [valueContent]="surveys ? stringify(surveys) : loading"
      formControlName="nameSurvey"
    >
        <ng-template tuiDataList>
            <tui-data-list *ngIf="surveys; else loading">
                <button
                    *ngFor="let item of surveys"
                    tuiOption
                    [value]="item.id"
                >
                    {{ item.name }}
                </button>
            </tui-data-list>
        </ng-template>
        <ng-template #loading>
            <tui-loader class="tui-space_vertical-3 loader"></tui-loader>
        </ng-template>
    </tui-select>
  </div>
  <div class="control-panel__stat-survey">
    <tui-select
        tuiTextfieldSize="l"
        class="tui-space_vertical-4 control-panel__select"
        formControlName="type"
        [tuiTextfieldLabelOutside]="true"
    >
        Тип опроса
        <input
            placeholder="Название опроса"
            tuiTextfield
        />
        <tui-data-list-wrapper
            *tuiDataList
            [items]="types"
        ></tui-data-list-wrapper>
    </tui-select>
    <tui-select
        tuiTextfieldSize="l"
        class="tui-space_vertical-4 control-panel__select"
        formControlName="department"
    >
        Отделение
        <input
            placeholder="Выбор отделения"
            tuiTextfield
        />
        <tui-data-list-wrapper
            *tuiDataList
            [items]="departments"
        ></tui-data-list-wrapper>
    </tui-select>
    <!-- <tui-input-date
        class="control-panel__select"
        formControlName="dateStart"
        tuiTextfieldSize="l"
        [tuiTextfieldLabelOutside]="true"
    >
      Дата начала
    </tui-input-date>
    <tui-input-date
        class="control-panel__select"
        formControlName="dateFinish"
        tuiTextfieldSize="l"
    >
      Дата окончания
    </tui-input-date> -->
    <div
      class="b-form control-panel__select">
      <tui-input-date-range
        formControlName="dateValue"
        tuiUnfinishedValidator="Finish filling the field"
        [max]="max"
        [min]="min"
      >
        Диапазон дат
        <input
          placeholder="From - To"
          tuiTextfield
        />
      </tui-input-date-range>
    </div>
  </div>
</div>
<div class="main">
  <div *ngIf="message" style="font-size: 1.8rem; text-align: center; width: 90%;">{{message}}</div>
  <ng-container *ngIf="!message">
    <div *ngFor="let question of questions; let i = index" class="stat-block">
      <app-stat-block [question]="question" [index]="i"></app-stat-block>
    </div>
  </ng-container>
</div>
